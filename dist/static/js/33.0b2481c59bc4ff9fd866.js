webpackJsonp([33],{"9jzx":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("4YfN"),i=s.n(o),a=s("R4Sj"),l=s("9cX3"),n=s("Ymoe"),r={computed:i()({},Object(a.e)({prom:function(t){return t.prom},user:function(t){return t.user}})),components:{"v-exportTable":l.a,"v-pageTable":n.a},data:function(){return{uploadAction:"",atb_format:!1,processNum:0,headers:{},uploadHead:{},form:{"等待扩容小区":"","站号":"","站名":"","分公司":"","扩容前配置":"","双载波扩容方案":"","扩容扇区数":"","扩容后配置":"","扩容小区":""},isShow_Par:!0,isShow:!1,fileList:[],selectrow:-1,tables:[],pageNum:0,isloading:!1,resultTable:{},resultTableName:[{tableName:"扩容结果"},{tableName:"扩容错误信息"},{tableName:"错误信息"}],oneTable:[],tableName:"",oneTableData:[],tablesData:[],total:0,pagesize:10,currentPage:1}},created:function(){var t=this;sessionStorage.getItem("pname")&&this.setpname_prom(sessionStorage.getItem("pname")),window.addEventListener("beforeunload",function(){sessionStorage.setItem("pname",sessionStorage.getItem("pname"))}),this.headers={projectname:this.prom.prom_pname,username:JSON.parse(sessionStorage.user).username,filetype:"expansion"},this.uploadHead={projectname:this.prom.prom_pname,username:JSON.parse(sessionStorage.user).username,filetype:"expansion",Authorization:"bearer "+sessionStorage.getItem("token")},this.uploadAction=this.user.httppath+"/api/Expasion/Upload",this.$http.post(this.user.httppath+"/api/Expasion/GetInTemplate",{},{headers:this.headers}).then(function(e){console.log(e),"不能操作该工程"!==e&&(t.tables=e,t.total=t.tables.length)}).catch(function(t){console.log(t)})},methods:i()({},Object(a.d)(["setpname_prom"]),{initPageNum:function(){this.pageNum=this.tables.length},analysis:function(){"default"!==this.prom.prom_pname?this.dbInput():this.$notify({title:"警告",message:"没有权限对公有工程进行数据入库",type:"warning"})},send:function(){console.log("这是send 函数")},handleEdit:function(t,e){this.selectrow=t+(this.currentPage-1)*this.pagesize,this.form["等待扩容小区"]=this.tables[this.selectrow]["等待扩容小区"],this.form["站号"]=this.tables[this.selectrow]["站号"],this.form["站名"]=this.tables[this.selectrow]["站名"],this.form["分公司"]=this.tables[this.selectrow]["分公司"],this.form["扩容前配置"]=this.tables[this.selectrow]["扩容前配置"],this.form["双载波扩容方案"]=this.tables[this.selectrow]["双载波扩容方案"],this.form["扩容扇区数"]=this.tables[this.selectrow]["扩容扇区数"],this.form["扩容后配置"]=this.tables[this.selectrow]["扩容后配置"],this.form["扩容小区"]=this.tables[this.selectrow]["扩容小区"],this.isShow=!this.isShow},paramPeizhi:function(){0!==this.tables.length?this.isShow_Par=!this.isShow_Par:this.$notify({title:"警告",message:"不能对公共工程进行操作",type:"warning"})},addrow:function(){this.selectrow=-1,this.form["等待扩容小区"]="",this.form["站号"]="",this.form["站名"]="",this.form["分公司"]="",this.form["扩容前配置"]="",this.form["双载波扩容方案"]="",this.form["扩容扇区数"]="",this.form["扩容后配置"]="",this.form["扩容小区"]="",this.isShow=!this.isShow},handleDelete:function(t,e){this.tables.splice(t+(this.currentPage-1)*this.pagesize,1),console.log(t,e)},changeTableName:function(){console.log(this.tableName),""!==this.resultTable&&("扩容结果"===this.tableName?this.oneTable=this.resultTable["扩容结果"]:"扩容错误信息"===this.tableName?this.oneTable=this.resultTable["扩容错误信息"]:this.oneTable=this.resultTable["错误信息"])},dbInput:function(){var t=this;console.log("dbInput"),this.isloading=!0,this.$http.post(this.user.httppath+"/api/Expasion/RndExpansion",this.tables,{headers:this.headers}).then(function(e){console.log("函数 dbInput success"),console.log(e),t.resultTable=e,t.isloading=!1}).catch(function(e){console.log("函数 dbInput error"),console.log(e),t.isloading=!1})},myUpload:function(){console.log("这是函数 myupload"),console.log(this.fileList),this.$http.post(this.user.httppath+"/api/Mr/Upload",this.fileList).then(function(t){}).catch(function(t){console.log(t)})},success:function(t,e,s){console.log(t)},submitUpload:function(){console.log("这是函数 submitUpload"),"default"===this.prom.prom_pname?this.$notify({title:"警告",message:"没有权限对公共工程进行操作",type:"warning"}):this.$refs.upload.submit()},handleRemove:function(t,e){console.log(t),console.log(e)},handlePreview:function(t){console.log(t)},onSubmit:function(t){-1!==t?(console.log(this.tables[t]),this.tables[t]["等待扩容小区"]=this.form["等待扩容小区"],this.tables[t]["站号"]=this.form["站号"],this.tables[t]["站名"]=this.form["站名"],this.tables[t]["分公司"]=this.form["分公司"],this.tables[t]["扩容前配置"]=this.form["扩容前配置"],this.tables[t]["双载波扩容方案"]=this.form["双载波扩容方案"],this.tables[t]["扩容扇区数"]=this.form["扩容扇区数"],this.tables[t]["扩容后配置"]=this.form["扩容后配置"],this.tables[t]["扩容小区"]=this.form["扩容小区"]):this.tables.push(this.form),this.isShow=!this.isShow},cancel:function(){this.form.CATEGORY="",this.form.CELLTYPE2="",this.form.FILTER="",this.form.MONAME="",this.form.MOVALUE="",this.form.PARANAME="",this.form.RECOMMENDEDVALUE="",this.form.VERSION="",this.isShow=!1},handleSelectionChange:function(t){},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){console.log("当前页: "+t)}})},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"padding-left":"10px"}},[s("br"),t._v(" "),s("br"),t._v(" "),s("el-upload",{ref:"upload",staticClass:"elmro",attrs:{action:t.uploadAction,headers:t.uploadHead,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1,limit:1,multiple:!0,accept:".xlsx"}},[s("el-button",{attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("支持.xlsx格式的文件")]),t._v(" "),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")])],1),t._v(" "),s("hr"),t._v(" "),s("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",size:"mini"},on:{click:t.paramPeizhi}},[t._v("参数配置")]),t._v(" "),s("el-button",{staticStyle:{width:"80px","margin-left":"2px"},attrs:{type:"primary",loading:t.isloading,size:"mini"},on:{click:t.analysis}},[t._v("解析")]),t._v(" "),s("v-exportTable",{staticStyle:{"margin-left":"2px"},attrs:{tableData:t.oneTable}}),t._v(" "),t.isShow_Par?s("div",[s("br"),t._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addrow}},[t._v("添加")]),t._v(" "),s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tables.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),"tooltip-effect":"dark"}},[t._l(t.tables[0],function(e,o){return s("el-table-column",{key:o,attrs:{label:e,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row[o]))]}}])})}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",fixed:"right"},on:{click:function(s){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],2),t._v(" "),s("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,layout:"prev, pager, next, jumper","pager-count":5,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1):t._e(),t._v(" "),s("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[s("el-form-item",{staticStyle:{"margin-bottom":"10px"}},[s("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"表名称"},on:{change:t.changeTableName},model:{value:t.tableName,callback:function(e){t.tableName=e},expression:"tableName"}},t._l(t.resultTableName,function(e){return s("el-option",{key:e.tableName,attrs:{label:e.tableName,value:e.tableName}},[t._v(t._s(e.tableName))])}),1)],1)],1),t._v(" "),s("v-pageTable",{attrs:{tableData:t.oneTable}}),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("el-dialog",{attrs:{title:"参数设置",visible:t.isShow,"close-on-click-modal":!1,"append-to-body":t.atb_format},on:{"update:visible":function(e){t.isShow=e}}},[s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"110px"}},[s("el-form-item",{attrs:{label:"等待扩容小区:"}},[s("el-input",{model:{value:t.form.等待扩容小区,callback:function(e){t.$set(t.form,"等待扩容小区",e)},expression:"form.等待扩容小区"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"站号:"}},[s("el-input",{model:{value:t.form.站号,callback:function(e){t.$set(t.form,"站号",e)},expression:"form.站号"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"站名:"}},[s("el-input",{model:{value:t.form.站名,callback:function(e){t.$set(t.form,"站名",e)},expression:"form.站名"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"分公司:"}},[s("el-input",{model:{value:t.form.分公司,callback:function(e){t.$set(t.form,"分公司",e)},expression:"form.分公司"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"扩容前配置:"}},[s("el-input",{model:{value:t.form.扩容前配置,callback:function(e){t.$set(t.form,"扩容前配置",e)},expression:"form.扩容前配置"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"双载波扩容方案:"}},[s("el-input",{model:{value:t.form.双载波扩容方案,callback:function(e){t.$set(t.form,"双载波扩容方案",e)},expression:"form.双载波扩容方案"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"扩容扇区数:"}},[s("el-input",{model:{value:t.form.扩容扇区数,callback:function(e){t.$set(t.form,"扩容扇区数",e)},expression:"form.扩容扇区数"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"扩容后配置:"}},[s("el-input",{model:{value:t.form.扩容后配置,callback:function(e){t.$set(t.form,"扩容后配置",e)},expression:"form.扩容后配置"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"扩容小区:"}},[s("el-input",{model:{value:t.form.扩容后配置,callback:function(e){t.$set(t.form,"扩容后配置",e)},expression:"form.扩容后配置"}})],1),t._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.onSubmit(t.selectrow)}}},[t._v("确认")]),t._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.cancel()}}},[t._v("取消")])],1)],1),t._v(" "),s("br")],1)},staticRenderFns:[]};var c=s("C7Lr")(r,m,!1,function(t){s("Y+Cx")},null,null);e.default=c.exports},"Y+Cx":function(t,e){}});
//# sourceMappingURL=33.0b2481c59bc4ff9fd866.js.map