webpackJsonp([14],{IvnA:function(e,t){},xrIa:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("ZLEe"),a=o.n(r),n=o("4YfN"),i=o.n(n),s=o("R4Sj"),l=o("9cX3"),m=o("Ymoe"),c={computed:i()({},Object(s.e)({prom:function(e){return e.prom},users:function(e){return e.user}})),components:{"v-exportTable":l.a,"v-pageTable":m.a},data:function(){return{head:{},ptype:"",atb_format:!1,dialogVisible:!1,activeIndex:"2",legitimat:!0,form:{overCoverage:{persent:"",threshold:""},poorCoverage:{persent:"",threshold:""}},resultTable:{},resultTableName:[],oneTable:[],tableName:"",isloading:!1}},created:function(){sessionStorage.getItem("pname")&&this.setpname_prom(sessionStorage.getItem("pname")),window.addEventListener("beforeunload",function(){sessionStorage.setItem("pname",sessionStorage.getItem("pname"))}),this.head={projectname:this.prom.prom_pname,username:JSON.parse(sessionStorage.user).username,filetype:"location"}},methods:i()({},Object(s.d)(["setpname_prom"]),{parconfig:function(){this.dialogVisible=!0},analysis:function(){var e=this;console.log(this.cherk(this.form)),console.log(this.legitimat),this.cherk(this.form)&&this.legitimat?(console.log(this.form),this.isloading=!0,this.$http.post(this.users.httppath+"/api/Locproblem/GetProblem",this.form,{headers:this.head}).then(function(t){if(console.log("函数 processbar 响应"),console.log(t),e.resultTable=t,e.resultTableName=[],0!==t.length)for(var o in t){var r=[];r.tableName=o,e.resultTableName.push(r)}e.isloading=!1,e.$notify({title:"成功",message:"解析成功",type:"success"})}).catch(function(t){console.log("函数 processbar 响应 失败"),console.log("error"),e.isloading=!1,e.$notify({title:"警告",message:t,type:"warning"}),console.log(t)})):this.$notify({title:"警告",message:"参数未设置或参数设置有误",type:"warning"})},changeTableName:function(){if(0!==a()(this.resultTable).length)if(0===this.tableName.length)this.oneTable={};else{var e=[],t=this.resultTable[this.tableName];for(var o in console.log(t),t){var r=[];r.id=o,r.cell=t[o],e.push(r)}this.oneTable=e}},handleSelect:function(e,t){this.ptype="1"===e?"overCoverage":"poorCoverage"},before_cherk:function(e){this.cherk(this.form)&&this.legitimat?e():(this.$notify({title:"警告",message:"参数未设置或参数设置有误",type:"warning"}),this.$confirm("是否关闭该窗口?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e()}).catch(function(){}))},cherk:function(e){for(var t in e){var o=e[t];for(var r in o)if(0===o[r].length)return!1}var a=this.numberRange(this.form.poorCoverage.persent,!1),n=this.numberRange(this.form.overCoverage.persent,!1),i=this.negNumber(this.form.poorCoverage.threshold,!1),s=this.negNumber(this.form.overCoverage.threshold,!1);return!!(a&&n&&i&&s)},numberRange:function(e,t){if(this.numberT(e)){var o=parseFloat(e);return o>100||o<0?(t&&this.$notify({title:"警告",message:"范围:0-100",type:"warning"}),this.legitimat=!1,!1):(this.legitimat=!0,!0)}},negNumber:function(e,t){if(this.numberT(e))return parseFloat(e)>=0?(t&&this.$notify({title:"警告",message:"参数应该为负数",type:"warning"}),this.legitimat=!1,!1):(this.legitimat=!0,!0)},numberT:function(e,t){if(""!==e)return isNaN(e)?(t&&this.$notify({title:"警告",message:"不是数字",type:"warning"}),this.legitimat=!1,!1):(this.legitimat=!0,!0)}})},v={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"padding-left":"10px"}},[o("br"),e._v(" "),o("el-dialog",{attrs:{title:"参数设置",visible:e.dialogVisible,"close-on-click-modal":!1,"append-to-body":e.atb_format,"before-close":e.before_cherk},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-menu",{staticStyle:{"text-align":"center"},attrs:{"default-active":e.activeIndex,mode:"horizontal","text-color":"black","active-text-color":"#409EFF"},on:{select:e.handleSelect}},[o("el-menu-item",{attrs:{index:"1"}},[e._v("过覆盖")]),e._v(" "),o("el-menu-item",{attrs:{index:"2"}},[e._v("弱覆盖")])],1),e._v(" "),"overCoverage"===e.ptype?o("div",[o("label",[e._v(" 门限:")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.overCoverage.threshold,expression:"form.overCoverage.threshold"}],attrs:{placeholder:"请输入数字"},domProps:{value:e.form.overCoverage.threshold},on:{change:function(t){return e.negNumber(e.form.overCoverage.threshold,!0)},input:function(t){t.target.composing||e.$set(e.form.overCoverage,"threshold",t.target.value)}}}),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("label",[e._v("占比:")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.overCoverage.persent,expression:"form.overCoverage.persent"}],attrs:{placeholder:"请输入数字"},domProps:{value:e.form.overCoverage.persent},on:{change:function(t){return e.numberRange(e.form.overCoverage.persent,!0)},input:function(t){t.target.composing||e.$set(e.form.overCoverage,"persent",t.target.value)}}}),e._v(" "),o("label",[e._v("%")])]):o("div",[o("label",[e._v("门限:")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.poorCoverage.threshold,expression:"form.poorCoverage.threshold"}],attrs:{placeholder:"请输入数字"},domProps:{value:e.form.poorCoverage.threshold},on:{change:function(t){return e.negNumber(e.form.poorCoverage.threshold,!0)},input:function(t){t.target.composing||e.$set(e.form.poorCoverage,"threshold",t.target.value)}}}),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("label",[e._v("占比:")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.poorCoverage.persent,expression:"form.poorCoverage.persent"}],attrs:{placeholder:"请输入数字"},domProps:{value:e.form.poorCoverage.persent},on:{change:function(t){return e.numberRange(e.form.poorCoverage.persent,!0)},input:function(t){t.target.composing||e.$set(e.form.poorCoverage,"persent",t.target.value)}}}),e._v(" "),o("label",[e._v("%")])])],1),e._v(" "),o("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",size:"mini"},on:{click:e.parconfig}},[e._v("参数设置")]),e._v(" "),o("el-button",{staticStyle:{width:"80px","margin-left":"2px"},attrs:{type:"primary",loading:e.isloading,size:"mini"},on:{click:e.analysis}},[e._v("解析")]),e._v(" "),o("v-exportTable",{staticStyle:{"margin-left":"2px"},attrs:{tableData:e.oneTable}}),e._v(" "),o("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[o("el-form-item",{staticStyle:{"margin-bottom":"10px"}},[o("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"表名称"},on:{change:e.changeTableName},model:{value:e.tableName,callback:function(t){e.tableName=t},expression:"tableName"}},e._l(e.resultTableName,function(t){return o("el-option",{key:t.tableName,attrs:{label:t.tableName,value:t.tableName}},[e._v(e._s(t.tableName))])}),1)],1)],1),e._v(" "),o("v-pageTable",{attrs:{tableData:e.oneTable}})],1)},staticRenderFns:[]};var p=o("C7Lr")(c,v,!1,function(e){o("IvnA")},null,null);t.default=p.exports}});
//# sourceMappingURL=14.22a6ce98384e5553d207.js.map