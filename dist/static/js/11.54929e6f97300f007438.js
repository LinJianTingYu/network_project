webpackJsonp([11],{EQFw:function(e,t){},d8RA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("hRKE"),s=a.n(l),i=a("4YfN"),o=a.n(i),n=a("R4Sj"),r=a("9cX3"),u=a("Ymoe"),h={computed:o()({},Object(n.e)({prom:function(e){return e.prom},user:function(e){return e.user}})),components:{"v-exportTable":r.a,"v-pageTable":u.a},data:function(){return{tableHead:[],typedate:[{value:"MRO"},{value:"MRE"},{value:"MRS"}],typevalue:"",tabledate:[],tablevalue:"",tabledis:!0,quotadata:[],quotavalue:"",quotadis:!0,celldata:[],cellvalue:"",celladis:!0,quotadata2:[],quotavalue2:"",quotadis2:!0,time:"",thresholdLow:"",thresholdHight:"",data:[],datap:[]}},created:function(){var e=this;sessionStorage.getItem("pname")&&this.setpname_prom(sessionStorage.getItem("pname")),window.addEventListener("beforeunload",function(){sessionStorage.setItem("pname",sessionStorage.getItem("pname"))});var t={headers:{projectname:this.prom.prom_pname,username:JSON.parse(sessionStorage.user).username,filetype:"mr"}};this.$http.post(this.user.httppath+"/api/MRTest/MrInfo",{},t).then(function(t){console.log("created"),e.tableHead=t,console.log(e.tableHead),console.log(t)}).catch(function(e){console.log(e)})},mounted:function(){this.drawLine()},methods:o()({},Object(n.d)(["setpname_prom"]),{counter:function(){var e=this;this.datap=[],console.log("counter 这是计算函数函数");var t=sessionStorage.getItem("user"),a="";if(isNaN(this.thresholdLow)||isNaN(this.thresholdHight))this.$notify({title:"警告",message:"门限设置错误",type:"warning"});else{","===(a=this.thresholdLow+","+this.thresholdHight)&&(a="");var l="";0!==this.quotavalue.length&&0!==this.quotavalue2.length&&(l=this.quotavalue+","+this.quotavalue2);var s="";null!==this.time&&(s=this.time.toString());var i={mrtype:this.typevalue,mrtable:this.tablevalue,mrcolumn:l,mrcell:this.cellvalue,time:s,threshold:a};if(0!==this.typevalue.length&&0!==this.tablevalue.length&&0!==this.quotavalue.length&&0!==this.quotavalue2.length&&0!==this.cellvalue.length){console.log(i);var o={headers:{projectname:this.prom.prom_pname,username:t.username,filetype:"mr"}};this.$http.post(this.user.httppath+"/api/MRTest/TwoDAnalysis",i,o).then(function(t){console.log(t),e.data=t;var a=0,l=0;for(var s in t){a=parseFloat(t[s].value1),l=parseFloat(t[s].value2);var i=[];i.push(a),i.push(l),e.datap.push(i)}e.drawLine(),console.log(e.datap)}).catch(function(e){console.log(e)})}else this.$notify({title:"警告",message:"数据不完整",type:"warning"})}},mrtype:function(){if(console.log("函数 mrtype"),this.tableHead!==[]){for(var e in this.tabledate=[],this.tablevalue="",this.tabledis=!1,this.tableHead[this.typevalue])if("objId"!==e){var t={};t.value=e,this.tabledate.push(t)}this.quotadata=[],this.quotavalue="",this.quotadis=!0,this.quotadata2=[],this.quotavalue2="",this.quotadis2=!0,this.celldata=[],this.cellvalue="",this.celladis=!0,console.log(this.tabledis),console.log(this.tabledate),console.log("------")}},mrtable:function(){console.log("函数 mrtable"),this.quotadis=!1,this.quotadata=[],this.quotavalue="",this.quotadis2=!1,this.quotadata2=[],this.quotavalue2="";var e=this.tableHead[this.typevalue][this.tablevalue];for(var t in this.tableHead[this.typevalue][this.tablevalue]){var a={};a.value=e[t],this.quotadata.push(a),this.quotadata2.push(a)}this.celldata=[],this.cellvalue="",this.celladis=!0},mrquota:function(){this.celladis=!1,this.celldata=[],this.cellvalue="";var e={value:"all"};this.celldata.push(e);var t=this.tableHead[this.typevalue].objId;for(var a in t){var l={};l.value=t[a],this.celldata.push(l)}console.log("函数 mrquota")},drawLine:function(){var e=this.$echarts.init(document.getElementById("myChart")),t={title:{text:"二维分析"},xAxis:{name:this.quotavalue,nameLocation:"middle"},yAxis:{name:this.quotavalue2},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"93%",start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100},{type:"inside",yAxisIndex:[0],start:0,end:100}],series:[{symbolSize:6,data:this.datap,type:"scatter"}]};t&&"object"===(void 0===t?"undefined":s()(t))&&e.setOption(t,!0)}})},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("br"),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"mr 类型"},on:{change:function(t){return e.mrtype()}},model:{value:e.typevalue,callback:function(t){e.typevalue=t},expression:"typevalue"}},e._l(e.typedate,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1),e._v(" "),a("i",{staticClass:"el-icon-caret-right"}),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"mr 表名",disabled:e.tabledis},on:{change:function(t){return e.mrtable()}},model:{value:e.tablevalue,callback:function(t){e.tablevalue=t},expression:"tablevalue"}},e._l(e.tabledate,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1),e._v(" "),a("i",{staticClass:"el-icon-caret-right"}),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"mr 列名",disabled:e.quotadis},on:{change:function(t){return e.mrquota()}},model:{value:e.quotavalue,callback:function(t){e.quotavalue=t},expression:"quotavalue"}},e._l(e.quotadata,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1),e._v(" "),a("i",{staticClass:"el-icon-caret-right"}),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"mr 小区名称",disabled:e.celladis},model:{value:e.cellvalue,callback:function(t){e.cellvalue=t},expression:"cellvalue"}},e._l(e.celldata,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.counter()}}},[e._v("开始查询")]),e._v(" "),a("br"),e._v(" "),a("el-select",{staticClass:"mrcolumn",attrs:{size:"small",placeholder:"mr 列名",disabled:e.quotadis2},model:{value:e.quotavalue2,callback:function(t){e.quotavalue2=t},expression:"quotavalue2"}},e._l(e.quotadata2,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1),e._v("\n         \n    "),a("br"),e._v(" "),a("div",{staticClass:"block"},[a("br"),e._v("\n      备选项:\n      "),a("br"),e._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:hh:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("br"),e._v(" "),a("m-input",{attrs:{placeholder:"门限值 低",theme:"danger",size:"small"},model:{value:e.thresholdLow,callback:function(t){e.thresholdLow=t},expression:"thresholdLow"}}),e._v(" "),a("i",{staticClass:"el-icon-minus"}),e._v(" "),a("m-input",{attrs:{placeholder:"门限值 高",theme:"danger",size:"small"},model:{value:e.thresholdHight,callback:function(t){e.thresholdHight=t},expression:"thresholdHight"}}),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("hr"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("div",{style:{width:"900px",height:"300px"},attrs:{id:"myChart"}}),e._v(" "),a("hr"),e._v(" "),a("v-exportTable",{attrs:{tableData:e.data}}),e._v(" "),a("br"),a("br"),e._v(" "),a("v-pageTable",{attrs:{tableData:e.data}})],1)],1)},staticRenderFns:[]};var d=a("C7Lr")(h,c,!1,function(e){a("EQFw")},null,null);t.default=d.exports}});
//# sourceMappingURL=11.54929e6f97300f007438.js.map